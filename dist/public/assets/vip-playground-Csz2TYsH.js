import{c as w,u as I,r as l,j as e,g as J,B as d,E as A,n as Y,C as f,l as T,P,o as G,R as X,p as Z,T as K,d as Q,e as j,q as ee,D as se,s as te,f as N,Z as ae,t as u}from"./index-DKbfUBq8.js";import{D as re}from"./download-DmOic8GG.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],le=w("git-compare",ne);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],ce=w("network",ie);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],de=w("share-2",oe);function pe(){const{user:E}=I(),S=E?.isPro||!1,[h,F]=l.useState(`function fibonacci(n) {
  if (n <= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

function main() {
  const result = fibonacci(6);
  console.log("Result:", result);
  return result;
}

main();`),[a,m]=l.useState({frames:[],currentFrame:0,isRunning:!1,output:[],errors:[]}),[p,M]=l.useState(500),[k,U]=l.useState(!0),[me,xe]=l.useState(!0),[g,$]=l.useState(!1),[_,z]=l.useState(""),y=l.useRef(null),v=l.useRef(null),O=()=>{if(!S){u({title:"Pro Required",description:"Advanced playground features require Pro subscription",variant:"destructive"});return}const s=[],t=[],c=[],n=console.log;console.log=(...r)=>{t.push(r.map(x=>String(x)).join(" ")),n.apply(console,r)};try{const r=performance.now(),x=new Function(`
        ${h}
        return { executed: true };
      `);s.push({timestamp:performance.now()-r,line:1,variables:{},stack:["main()"],heap:{},memory:Math.random()*1e3+500,cpuTime:0});const b=x(),o=performance.now();s.push({timestamp:o-r,line:h.split(`
`).length,variables:{result:b},stack:[],heap:{},memory:Math.random()*1e3+800,cpuTime:o-r}),m({frames:s,currentFrame:0,isRunning:!1,output:t,errors:c}),u({title:"✅ Execution Complete",description:`Captured ${s.length} frames in ${(o-r).toFixed(2)}ms`})}catch(r){c.push(r.message||String(r)),m({frames:s,currentFrame:0,isRunning:!1,output:t,errors:c}),u({title:"❌ Execution Error",description:r.message||"Unknown error",variant:"destructive"})}finally{console.log=n}},L=()=>{a.frames.length!==0&&m(s=>({...s,isRunning:!0}))},q=()=>{m(s=>({...s,isRunning:!1}))},W=()=>{m(s=>({...s,currentFrame:0,isRunning:!1}))},B=()=>{const s=JSON.stringify(a,null,2),t=new Blob([s],{type:"application/json"}),c=URL.createObjectURL(t),n=document.createElement("a");n.href=c,n.download=`execution-trace-${Date.now()}.json`,n.click(),URL.revokeObjectURL(c),u({title:"✅ Exported",description:"Execution trace saved"})},D=async()=>{try{await navigator.clipboard.writeText(h),u({title:"✅ Copied",description:"Code copied to clipboard"})}catch{u({title:"❌ Failed",description:"Could not copy to clipboard"})}};l.useEffect(()=>(a.isRunning&&a.currentFrame<a.frames.length-1?v.current=setTimeout(()=>{m(s=>({...s,currentFrame:s.currentFrame+1}))},p):a.currentFrame>=a.frames.length-1&&m(s=>({...s,isRunning:!1})),()=>{v.current&&clearTimeout(v.current)}),[a.isRunning,a.currentFrame,p,a.frames.length]),l.useEffect(()=>{if(!y.current||a.frames.length===0)return;const s=y.current,t=s.getContext("2d");if(!t)return;const c=s.width,n=s.height;t.clearRect(0,0,c,n);const r=c/a.frames.length;a.frames.forEach((b,o)=>{const C=o*r,R=b.memory/2e3*n;if(t.fillStyle=o===a.currentFrame?"#f59e0b":"#6366f1",t.fillRect(C,n-R,r-2,R),t.strokeStyle="#ef4444",t.lineWidth=2,o>0){const V=n-a.frames[o-1].cpuTime/10*n,H=n-b.cpuTime/10*n;t.beginPath(),t.moveTo((o-1)*r+r/2,V),t.lineTo(C+r/2,H),t.stroke()}});const x=a.currentFrame*r;t.strokeStyle="#10b981",t.lineWidth=3,t.beginPath(),t.moveTo(x,0),t.lineTo(x,n),t.stroke()},[a]);const i=a.frames[a.currentFrame];return e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 space-y-6 bg-gradient-to-br from-amber-950/40 via-slate-900/70 to-slate-950/80 rounded-3xl border border-amber-500/30 shadow-[0_0_30px_rgba(251,191,36,0.15)]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-amber-500/15 border border-amber-400/40 text-amber-300 text-xs font-semibold mb-2",children:[e.jsx(J,{className:"w-4 h-4"}),"VIP Playground - Advanced Execution"]}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Professional Interactive Playground"}),e.jsx("p",{className:"text-sm text-indigo-200/80 mt-1",children:"Run, analyze and compare code with real-time visualization of memory, CPU and call stack"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>U(!k),className:"border-slate-700",children:[k?e.jsx(A,{className:"w-4 h-4"}):e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2",children:"Memory"})]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>$(!g),className:"border-slate-700",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2",children:"Compare"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(f,{className:"p-4 bg-slate-900/60 border border-slate-700 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-indigo-400"}),g?"Code A":"Your Code"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{size:"sm",onClick:D,variant:"outline",className:"border-indigo-400/40 text-indigo-200",children:e.jsx(de,{className:"w-4 h-4"})}),e.jsx(d,{size:"sm",onClick:B,variant:"outline",className:"border-indigo-400/40 text-indigo-200",disabled:a.frames.length===0,children:e.jsx(re,{className:"w-4 h-4"})})]})]}),e.jsx("textarea",{value:h,onChange:s=>F(s.target.value),className:"w-full h-96 p-3 rounded-lg font-mono text-sm bg-black/60 text-slate-100 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-400/60",placeholder:"Write your JavaScript code here...",spellCheck:!1}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsxs(d,{onClick:O,className:"bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400 text-white font-semibold shadow-[0_0_15px_rgba(251,191,36,0.4)]",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Execute & Capture"]}),e.jsx(d,{onClick:L,variant:"outline",disabled:a.frames.length===0||a.isRunning,className:"border-slate-700",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx(d,{onClick:q,variant:"outline",disabled:!a.isRunning,className:"border-slate-700",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx(d,{onClick:W,variant:"outline",disabled:a.frames.length===0,className:"border-slate-700",children:e.jsx(X,{className:"w-4 h-4"})}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 text-xs text-indigo-200",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("input",{type:"range",min:"100",max:"2000",step:"100",value:p,onChange:s=>M(Number(s.target.value)),className:"w-24"}),e.jsxs("span",{children:[p,"ms"]})]})]})]}),g&&e.jsxs(f,{className:"p-4 bg-slate-900/60 border border-slate-700 rounded-xl shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-purple-400"}),"Code B (Comparison)"]}),e.jsx("textarea",{value:_,onChange:s=>z(s.target.value),className:"w-full h-96 p-3 rounded-lg font-mono text-sm bg-black/60 text-slate-100 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-400/60",placeholder:"Paste alternative implementation to compare...",spellCheck:!1})]}),!g&&e.jsx(f,{className:"p-4 bg-slate-900/60 border border-slate-700 rounded-xl shadow-sm",children:e.jsxs(K,{defaultValue:"output",className:"w-full",children:[e.jsxs(Q,{className:"grid w-full grid-cols-4",children:[e.jsxs(j,{value:"output",children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Output"]}),e.jsxs(j,{value:"timeline",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),"Timeline"]}),e.jsxs(j,{value:"memory",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),"Memory"]}),e.jsxs(j,{value:"cpu",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"CPU"]})]}),e.jsx(N,{value:"output",className:"mt-4",children:e.jsxs("div",{className:"bg-black/60 rounded-lg p-3 h-96 overflow-auto font-mono text-sm",children:[a.output.length===0&&a.errors.length===0&&e.jsx("p",{className:"text-gray-500",children:'No output yet. Click "Execute & Capture" to run.'}),a.output.map((s,t)=>e.jsx("div",{className:"text-green-300",children:s},`out-${t}`)),a.errors.map((s,t)=>e.jsxs("div",{className:"text-red-300",children:["❌ ",s]},`err-${t}`))]})}),e.jsx(N,{value:"timeline",className:"mt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("canvas",{ref:y,width:600,height:200,className:"w-full rounded-lg bg-black/40 border border-slate-700"}),i&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-black/40 rounded p-3 border border-slate-700",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Current Line"}),e.jsx("div",{className:"text-lg font-bold text-indigo-300",children:i.line})]}),e.jsxs("div",{className:"bg-black/40 rounded p-3 border border-slate-700",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Timestamp"}),e.jsxs("div",{className:"text-lg font-bold text-indigo-300",children:[i.timestamp.toFixed(2),"ms"]})]}),e.jsxs("div",{className:"bg-black/40 rounded p-3 border border-slate-700",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Memory Usage"}),e.jsxs("div",{className:"text-lg font-bold text-purple-300",children:[i.memory.toFixed(0)," KB"]})]}),e.jsxs("div",{className:"bg-black/40 rounded p-3 border border-slate-700",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"CPU Time"}),e.jsxs("div",{className:"text-lg font-bold text-amber-300",children:[i.cpuTime.toFixed(2),"ms"]})]})]})]})}),e.jsx(N,{value:"memory",className:"mt-4",children:e.jsx("div",{className:"bg-black/60 rounded-lg p-3 h-96 overflow-auto",children:i?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold text-indigo-300 mb-2",children:"Call Stack"}),i.stack.map((s,t)=>e.jsx("div",{className:"bg-indigo-500/10 border border-slate-700 rounded px-3 py-2 text-sm",children:s},`stack-${t}`)),e.jsx("div",{className:"text-xs font-semibold text-purple-300 mb-2 mt-4",children:"Heap"}),Object.keys(i.heap).length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No heap objects"}):Object.entries(i.heap).map(([s,t])=>e.jsxs("div",{className:"bg-purple-500/10 border border-slate-700 rounded px-3 py-2 text-sm",children:[e.jsx("span",{className:"text-purple-300",children:s}),":",e.jsx("span",{className:"text-gray-300",children:JSON.stringify(t)})]},`heap-${s}`))]}):e.jsx("p",{className:"text-gray-500",children:"Run code to see memory state"})})}),e.jsx(N,{value:"cpu",className:"mt-4",children:e.jsx("div",{className:"bg-black/60 rounded-lg p-3 h-96 overflow-auto",children:a.frames.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold text-amber-300 mb-3",children:"CPU Performance Profile"}),a.frames.map((s,t)=>e.jsxs("div",{className:`flex items-center gap-3 p-2 rounded ${t===a.currentFrame?"bg-amber-500/20 border border-amber-400/40":"bg-slate-800/40"}`,children:[e.jsxs("span",{className:"text-xs text-gray-400 w-12",children:["#",t+1]}),e.jsx("div",{className:"flex-1 h-2 bg-black/40 rounded overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-red-500",style:{width:`${Math.min(100,s.cpuTime/50*100)}%`}})}),e.jsxs("span",{className:"text-xs text-amber-300 w-16 text-right",children:[s.cpuTime.toFixed(2),"ms"]})]},`cpu-${t}`))]}):e.jsx("p",{className:"text-gray-500",children:"Run code to see CPU profile"})})})]})})]}),e.jsx(f,{className:"p-4 bg-slate-800/80 border border-slate-700 rounded-xl",children:e.jsxs("div",{className:"text-xs text-indigo-100 space-y-2",children:[e.jsxs("div",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-amber-400"}),"How to use this advanced playground:"]}),e.jsxs("ul",{className:"space-y-1 text-indigo-200/80 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Execute & Capture:"})," Runs the code and records each frame (line, variables, memory, CPU)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Timeline:"})," Graphically shows memory usage (blue bars) and CPU time (red line)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Compare Mode:"})," Paste two different implementations and compare performance/results"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Export:"})," Saves the entire execution trace as JSON for offline analysis"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Playback:"})," Watch frame-by-frame how the code executed (adjust speed with the slider)"]})]})]})})]})}export{pe as VIPPlayground};
